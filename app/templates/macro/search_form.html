{% macro render_search_form(
    fields=[],
    method='GET',
    action='',
    submit_text='搜索',
    reset_text='重置',
    form_classes='',
    field_classes='',
    button_classes=''
) %}

<form method="{{ method }}" action="{{ action }}" class="{{ form_classes }}">
    <div class="row compact-form-row g-3">
        {% for field in fields %}
        <div class="col-md">
            <div class="form-group form-group-compact">
                {% if field.label %}
                <label class="form-label-compact" for="{{ field.name }}">{{ field.label }}</label>
                {% endif %}
                
                {% if field.type == 'text' %}
                <input type="text" class="form-control compact-control {{ field_classes }}" 
                        id="{{ field.name }}" name="{{ field.name }}" 
                        value="{{ field.value }}" placeholder="{{ field.placeholder }}"
                        {{ 'required' if field.required }}>
                
                {% elif field.type == 'select' %}
                <select class="form-select compact-control {{ field_classes }}" 
                        id="{{ field.name }}" name="{{ field.name }}"
                        {{ 'required' if field.required }}>
                    {% if field.placeholder %}
                    <option value="" disabled selected>{{ field.placeholder }}</option>
                    {% endif %}
                    {% for option in field.options %}
                    {% if option is string %}
                    <option value="{{ option }}" {{ 'selected' if field.value == option }}>{{ option }}</option>
                    {% else %}
                    <option value="{{ option[0] }}" {{ 'selected' if field.value == option[0] }}>{{ option[1] }}</option>
                    {% endif %}
                    {% endfor %}
                </select>
                
                {% elif field.type == 'date' %}
                <input type="date" class="form-control compact-control {{ field_classes }}" 
                        id="{{ field.name }}" name="{{ field.name }}" 
                        value="{{ field.value }}"
                        {{ 'required' if field.required }}>
                
                {% elif field.type == 'number' %}
                <input type="number" class="form-control compact-control {{ field_classes }}" 
                        id="{{ field.name }}" name="{{ field.name }}" 
                        value="{{ field.value }}" placeholder="{{ field.placeholder }}"
                        min="{{ field.min }}" max="{{ field.max }}"
                        {{ 'required' if field.required }}>
                
                {% elif field.type == 'range' %}
                <div class="d-flex align-items-center">
                    <input type="range" class="form-range me-2" 
                            id="{{ field.name }}" name="{{ field.name }}" 
                            value="{{ field.value }}" min="{{ field.min }}" max="{{ field.max }}"
                            {{ 'required' if field.required }}>
                    <span class="badge bg-secondary">{{ field.value }}</span>
                </div>
                
                {% elif field.type == 'checkbox' %}
                <div class="form-check mt-2">
                    <input class="form-check-input" type="checkbox" 
                            id="{{ field.name }}" name="{{ field.name }}" 
                            value="1" {{ 'checked' if field.value }}>
                    <label class="form-check-label" for="{{ field.name }}">{{ field.checkbox_label }}</label>
                </div>
                {% endif %}
            </div>
        </div>
        {% endfor %}
        
        <!-- 操作按钮 -->
        <div class="col-md-auto">
            <div class="d-flex gap-2">
                <button type="submit" class="btn btn-primary action-btn flex-grow-1 {{ button_classes }}">
                    <i class="bi bi-search"></i> {{ submit_text }}
                </button>
                {% if reset_text %}
                <button type="reset" class="btn btn-outline-secondary action-btn {{ button_classes }}">
                    <i class="bi bi-arrow-counterclockwise"></i> {{ reset_text }}
                </button>
                {% endif %}
            </div>
        </div>
    </div>
</form>
{% endmacro %}